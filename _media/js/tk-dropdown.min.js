(()=>{class e extends HTMLElement{static get observedAttributes(){return["mode"]}get mode(){return this.getAttribute("mode")}set mode(e){return this.setAttribute("mode",e)}connectedCallback(){const e=this.firstElementChild;this.mode="hover"===this.mode?"mouseover":"click",e.setAttribute("aria-haspopup",!0),e.setAttribute("aria-expanded",!1),e.addEventListener(this.mode,()=>{this.hasAttribute("expanded")?(this.removeAttribute("expanded"),e.setAttribute("aria-expanded",!1),this.dispatchCustomEvent("tk.dropdown.hide")):(this.setAttribute("expanded",""),e.setAttribute("aria-expanded",!0),this.dispatchCustomEvent("tk.dropdown.show")),document.addEventListener(this.mode,t=>{t.target===e||this.findAncestor(t.target,"tk-dropdown")||this.close()})})}disconnectedCallback(){this.removeEventListener("tk.dropdown.show",this.close,!0),this.removeEventListener("tk.dropdown.hide",this.close,!0),this.removeEventListener("mouseover",this.close,!0),this.removeEventListener("click",this.close,!0)}attributeChangedCallback(e,t,s){e}close(){this.removeAttribute("expanded"),this.firstElementChild.setAttribute("aria-expanded",!1),this.dispatchCustomEvent("tk.dropdown.hide")}dispatchCustomEvent(e){const t=new CustomEvent(e,{bubbles:!0,cancelable:!0});t.relatedTarget=this,this.dispatchEvent(t),this.removeEventListener(e,this)}findAncestor(e,t){for(;(e=e.parentElement)&&e.nodeName.toLowerCase()!==t;);return e}}customElements.define("tk-dropdown",e)})();